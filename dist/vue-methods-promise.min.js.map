{"version":3,"file":"vue-methods-promise.min.js","sources":["../src/isPromise.js","../src/index.js","../src/isObject.js","../src/methodsPromise.js"],"sourcesContent":["export default function isPromise (obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.constructor === 'function' && !Object.hasOwnProperty.call(obj, 'constructor') && obj.constructor.name === 'Promise'\n}\n","import methodsPromise from './methodsPromise'\n\nexport default function install (Vue, opt) {\n  if (install.installed) return // already installed\n\n  Vue.mixin(methodsPromise(opt))\n}\n","export default function (obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]'\n}\n","import isPromise from './isPromise'\nimport isObject from './isObject'\n\nexport default (opt = {}) => {\n  // Configure the hook function\n  if (typeof opt.hookName !== 'string') {\n    opt.hookName = '$promise'\n  }\n  // Global hook function\n  if (typeof opt.promise !== 'function') {\n    opt.promise = (mp) => {\n      mp.catch((err) => {\n        console.log(err)\n      })\n    }\n  }\n\n  return {\n    beforeCreate () {\n      const { methods } = this.$options\n      if (!isObject(methods)) return\n      Object.keys(methods).forEach((k) => {\n        let fn = methods[k]\n        if (typeof fn === 'function' && k !== opt.hookName) {\n          methods[k] = hijack(fn)\n        }\n      })\n      function hijack (native) {\n        return function (...arg) {\n          let back = native.apply(this, arg)\n          if (isPromise(back)) {\n            if (typeof this[opt.hookName] === 'function') {\n              let hookBack = this[opt.hookName](back)\n              if (isPromise(hookBack)) {\n                return opt.promise.call(this, back)\n              }\n              return hookBack\n            } else {\n              return opt.promise.call(this, back)\n            }\n          }\n          return back\n        }\n      }\n    }\n  }\n}\n"],"names":["isPromise","obj","constructor","Object","hasOwnProperty","call","name","install","Vue","opt","installed","mixin","methodsPromise","prototype","toString","hookName","promise","mp","catch","err","log","hijack","native","arg","back","apply","this","hookBack","methods","$options","isObject","keys","forEach","k","fn"],"mappings":"4LAAe,SAASA,GAAWC,YACxBA,GAAuB,qBAARA,gBAAAA,KAAmC,kBAARA,IAAkD,kBAApBA,GAAIC,aAA+BC,OAAOC,eAAeC,KAAKJ,EAAK,gBAA2C,YAAzBA,EAAIC,YAAYI,MCCzK,QAASC,GAASC,EAAKC,GAChCF,EAAQG,aAERC,MAAMC,EAAeH,sNCLZ,SAAUR,SACwB,oBAAxCE,OAAOU,UAAUC,SAAST,KAAKJ,oBCExBQ,mEAEc,gBAAjBA,GAAIM,aACTA,SAAW,YAGU,kBAAhBN,GAAIO,YACTA,QAAU,SAACC,KACVC,MAAM,SAACC,WACAC,IAAID,wCAeLE,GAAQC,SACR,uCAAaC,4CACdC,GAAOF,EAAOG,MAAMC,KAAMH,MAC1BvB,EAAUwB,GAAO,IACe,kBAAvBE,MAAKjB,EAAIM,UAA0B,IACxCY,GAAWD,KAAKjB,EAAIM,UAAUS,SAC9BxB,GAAU2B,GACLlB,EAAIO,QAAQX,KAAKqB,KAAMF,GAEzBG,QAEAlB,GAAIO,QAAQX,KAAKqB,KAAMF,SAG3BA,OAtBHI,GAAYF,KAAKG,SAAjBD,OACHE,GAASF,WACPG,KAAKH,GAASI,QAAQ,SAACC,MACxBC,GAAKN,EAAQK,EACC,mBAAPC,IAAqBD,IAAMxB,EAAIM,aAChCkB,GAAKZ,EAAOa"}